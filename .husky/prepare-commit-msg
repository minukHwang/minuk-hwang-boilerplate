#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# ì»¤ë°‹ ë©”ì‹œì§€ íŒŒì¼ ì½ê¸°
COMMIT_MSG_FILE=$1
COMMIT_MSG=$(cat "$COMMIT_MSG_FILE")

# ì»¤ë°‹ ë©”ì‹œì§€ê°€ ì—†ìœ¼ë©´ ì¢…ë£Œ
if [[ -z "$COMMIT_MSG" ]]; then
  exit 0
fi

# ì»¤ë°‹ ë©”ì‹œì§€ì—ì„œ type ì¶”ì¶œ (feat:, fix:, docs: ë“±)
COMMIT_TYPE=$(echo "$COMMIT_MSG" | sed -n 's/^\([a-z]*\):.*/\1/p')

# typeì— ë”°ë¥¸ ì´ëª¨ì§€ ë§¤í•‘
case $COMMIT_TYPE in
  feat)
    EMOJI="âœ¨"
    ;;
  fix)
    EMOJI="ðŸ›"
    ;;
  hotfix)
    EMOJI="ðŸš¨"
    ;;
  refactor)
    EMOJI="â™»ï¸"
    ;;
  docs)
    EMOJI="ðŸ“"
    ;;
  style)
    EMOJI="ðŸ’„"
    ;;
  test)
    EMOJI="ðŸ§ª"
    ;;
  chore)
    EMOJI="ðŸ”§"
    ;;
  perf)
    EMOJI="âš¡"
    ;;
  ci)
    EMOJI="ðŸ‘·"
    ;;
  build)
    EMOJI="ðŸ“¦"
    ;;
  release)
    EMOJI="ðŸš€"
    ;;
  revert)
    EMOJI="âª"
    ;;
  wip)
    EMOJI="ðŸš§"
    ;;
  init)
    EMOJI="ðŸŽ‰"
    ;;
  *)
    EMOJI="ðŸ“Œ"
    ;;
esac

# ì´ëª¨ì§€ê°€ ì´ë¯¸ ìžˆëŠ”ì§€ í™•ì¸í•˜ê³  ì—†ìœ¼ë©´ ì¶”ê°€
if [[ ! "$COMMIT_MSG" =~ ^[[:space:]]*[[:print:]]*[[:space:]]*$ ]]; then
  echo "$EMOJI $COMMIT_MSG" > "$COMMIT_MSG_FILE"
fi 